## **📗 목차**


🏆 [프로젝트 소개](#-프로젝트-소개)

👨🏻‍💻 [팀원 소개](#-팀원-소개)

🛠 [개발 도구](#-개발-도구)

⏰ [프로젝트 일정](#-프로젝트-일정)

🔗 [API명세서와 ERD설계도](#-API명세서와-ERD설계도)
  
📝 [메뉴구조도](#-메뉴구조도)
  
✨ [화면 구현 및 코드 리뷰](#-화면-구현-및-코드-리뷰)
  - [회원가입 화면 구현 영상 및 코드 리뷰](#회원가입-화면-구현-영상-및-코드-리뷰)
  - [로그인 화면 구현 영상 및 코드 리뷰](#로그인-화면-구현-영상-및-코드-리뷰)
  - [펀딩 메인 페이지 화면 구현 영상 및 코드 리뷰](#펀딩-메인-페이지-화면-구현-영상-및-코드-리뷰)
  - [펀딩 상세 페이지 화면 구현 영상 및 코드 리뷰](#펀딩-상세-페이지-화면-구현-영상-및-코드-리뷰)
  - [관리자 펀딩 및 기부 등록 페이지 화면 구현 영상 및 코드 리뷰](#관리자-펀딩-및-기부-등록-페이지-화면-구현-영상-및-코드-리뷰)
  - [관리자 펀딩 및 기부 수정 화면 구현 영상 및 코드 리뷰](#관리자-펀딩-및-기부-수정-화면-구현-영상-및-코드-리뷰)
  - [관리자 펀딩 및 기부 삭제 화면 구현 영상 및 코드 리뷰](#관리자-펀딩-및-기부-삭제-화면-구현-영상-및-코드-리뷰)
  - [OAuth2 회원가입 및 로그인 화면 구현 영상 및 코드 리뷰](#OAuth2-회원가입-및-로그인-화면-구현-영상-및-코드-리뷰)
  - [OAuth2 Google, Kakao 계정 통합 화면 구현 영상 및 코드 리뷰](#OAuth2-Google-Kakao-계정-통합-화면-구현-영상-및-코드-리뷰)
  
👨🏻‍💻 [느낀점](#-느낀점)

<br/>

## **🏆 프로젝트 소개**

- 프로젝트 제목 - 펀딩 및 기부 서비스 테스트

- 프로젝트 목적 - 배운 것들을 복습 및 활용, 협업에 대한 이해

- 분류 - 팀프로젝트

- 제작 기간 - 2023.05.03 ~ 2023.06.07

<br/>

## **👨🏻‍💻 팀원 소개**

<br/>

> **팀장: 정의현** 
- 사용한 통계에 프로젝트 설계
- 펀딩페이지 CRUD 기능 구현 및 CSS
- 로그인 및 회원가입 기능 구현
- security jwt 및 accessToken 디테일 작업
- 파일 입출력
- API 명세서
- 관리자 CRUD 기능 구현
- OAuth2 로그인, 회원가입 기능 구현
- 결제 기능 구현

<br/>

> **팀원: 김수현** 
- 메인 페이지 기능 구현 및 CSS
- header 작업
- ppt 작업

<br/>

> **팀원: 김상현** 
- 기부페이지 CRUD 기능구현 및 CSS
- 로그인 회원가입 페이지 CSS
- ERD 명세서
- security jwt 및 accessToken 틀 작업

<br/>

> **팀원: 이해강** 
- 데이터 크롤링
- 검색 기능

<br/>

## **🛠 개발 도구**

<br/>

### FrontEnd

<img src="https://img.shields.io/badge/Visual Studio Code-007ACC?style=for-the-badge&logo=Visual Studio Code&logoColor=white"/> <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> 
<img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> 
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black"> 

### BackEnd

<img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"> <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> 

### 형상 관리
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"> <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">

<br/>

***ORM: Mybatis***

<br/>

## **⏰ 프로젝트 일정**


![스크린샷(1)](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/4f7ea0ba-3d55-4106-9672-da1fde38a496)

<br/><br/>

**참고 웹사이트:** https://happybean.naver.com/

<br/>

## **🔗 API명세서와 ERD설계도**

### API 명세서

https://third-tempo-8c0.notion.site/4b573b520b424c3590c6ce244e1df794?v=f2f7a9bebd714ea3be176765f004f3d2

<br/>

### ERD 설계도


<div align="center">
 
 ### 펀딩 ERD
 
</div>

![KakaoTalk_20230605_153904436](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/c6a471b0-85f3-4d27-a258-0ac460f730d4)

<br/><br/>

<div align="center">
 
 ### 기부 ERD

![KakaoTalk_20230605_154821409](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/86dc51b4-dca5-4fa9-bfb5-7398474b865f)


 
</div>

<br/><br/>

## **📝 메뉴구조도**

![스크린샷(2)](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/263c80b5-0421-4bb8-b7ac-96c53100b837)

<br/>

## **✨ 화면 구현 및 코드 리뷰**

<br/>

### **회원가입 화면 구현 영상 및 코드 리뷰**

<details>
<summary>이메일 유효성 검사</summary>
<div markdown="1">

</br>

**영상**

</br>

![이메일 유효성 검사](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/0bf30e4f-bf10-4864-a202-cba2c63a045d)

</br></br>

## FrontEnd

<br/>

**웹에서 이메일 입력 받기**

```html

<div css={signupInputContainerWrap}>
    <FormControl variant="standard">
            <Input id="input-with-icon-adornment"
                css={placeholderFontSize}
                label="email" 
                variant="outlined" 
                placeholder="이메일 주소 입력" 
                name="email" 
                type="text" 
                onChange={onChangeHandler} 
                startAdornment={
                    <InputAdornment position="start">
                    <Mail />
                    </InputAdornment>
                } />
                {emailSubmitDisabled ? (
                successMessage.email && <Alert css={errorCss} severity="success">{successMessage.email}</Alert>
            ) : (
                <>
                    {emailErrorMessage.email && <Alert css={errorCss} severity="error">{emailErrorMessage.email}</Alert>}
                    {errorMessage.email && <Alert css={errorCss} severity="error">{errorMessage.email}</Alert>}
                </>
            )}
        </FormControl>
        <Button variant="contained" css={checkedEmail} onClick={checkDuplicateEmail}>중복확인</Button>
    </div>

```

</br>

- input 창에 이메일 입력을 받고, 중복확인 버튼도 넣어준다.
- input 창에는 onChange, button에는 onClick을 넣어줌으로써 내가 취한 행동에 대한 값을 함수로 넘겨준다.

---

</br></br>

**입력 받은 값 처리**

```javascript

const onChangeHandler = (e) => {
    const { name, value } = e.target;
    setSignUp({...signUp, [name]: value});
}

```

</br>

- name에는 email, value에는 email이라는 이름을 가진 input창에 값이 들어가있다.
- 입력 받은 값을 setSignUp(useState로 렌더링이 될 때 마다 상태가 업데이트가 된다)에 데이터를 넣어준다.

---

</br></br>

**요청**

```javascript

const checkDuplicateEmail = async () => {
    setErrorMessages({email: ""})

    const data = {
        email: signUp.email
    }
    const option = {
        headers: {
            "Content-Type": "application/json"
        }
    }

    try {
        await axios.post("http://localhost:8080/auth/checkemail", JSON.stringify(data), option)
        setSuccessMessage({email: <div css={availableEmail}>사용 가능한 이메일입니다.</div>})
        setEmailSubmitDisabled(true);
    }catch(error) {
        setEmailErrorMessage({email: error.response.data.errorData.email})
        setEmailSubmitDisabled(false);
    }
}

```

</br>

- Javascript는 싱글 쓰레드이기 때문에 모든 코드가 비동기 처리로 돼서 요청에서 오류가 꽤 생길 수 있다. 예를 들어, 요청에 대한 코드 바로 다음에 응답으로 받은 데이터를 가지고 처리하는 코드가 있다 치자. 서버에 데이터 요청을 보내고 나서 응답이 오지도 않음과 동시에 필요한 데이터를 받지도 못했는데 다음 코드가 실행이 되는 상황이 생겨버린다. 그래서 비동기 처리 과정을 동기적인 것처럼 실행하기 위해 async 함수와 함께 await 키워드를 쓴다. (비동기 처리가 실제 동기 처리가 되는 것이 아니고, 동기와 유사하게 보이는 것임)

- 서버로 보낸 요청 데이터를 동기적인 것처럼 실행을 하고 싶기 때문에 await 뒤에 요청 url을 넣어준다.

- input 창에서 입력 받은 값을 요청 데이터로 보낸다.

- 만약 유효성 검사에서 에러 없이 성공적으로 처리가 됐다면 "사용 가능한 이메일입니다."를 띄워준다.

- 에러가 있다면 검사해서 떴던 에러 내용을 setEmailErrorMessage에 담는다.

- setEmailSubmitDisabled에 넣어준 상태 값은 아래 회원가입 성공에 설명이 있다.
  
---

</br></br>

## BackEnd

<br/>

**Controller**

```java

@RestController
@RequiredArgsConstructor
@RequestMapping("/auth")
public class SignUpController {
	
	private final SignUpService signUpService;
	
	@ValidAspect
	@PostMapping("/checkemail")
	public ResponseEntity<?> duplicatedEmail(@Valid @RequestBody DuplicatedEmailReqDto email, BindingResult bindingResult) {
		signUpService.duplicatedEmail(email.getEmail());
		return ResponseEntity.ok().body(true);
	}
	
}

```

</br>

- 프론트에서 보낸 email을 받아준다.
- Post요청(CRUD 중 Create)에 대한 데이터 처리.
- @Valid를 달아주면 dto 안에 있는 email(), Pattern() 등을 검사해준다.
- @Valid와 BindingResult는 세트임. signUpReqDto의 오류를 BindingResult에게 모두 넘겨준다.

---

</br></br>

**Dto**

```java

@Data
public class DuplicatedEmailReqDto {
	@Email
	@NotBlank(message="이메일을 입력하세요")
	private String email;
}

```

</br>

- @Email과 @NotBlank 등 validation과 관련된 어노테이션을 써주면 거기에 해당되는 메세지를 에러 메세지로 반환해준다. 

---

</br></br>

**Service**

```java

public void duplicatedEmail(String email) {
  if(signUpRepository.findUserByEmail(email) != null) {
    throw new CustomException("Duplicated Email", 
        ErrorMap.builder()
        .put("email", "사용 중인 email입니다.")
        .build());
  }
}

```

</br>

- Controller에서 보낸 email을 받아서 데이터베이스에 있는 이메일과 비교를 한다.
- 이메일이 존재한다면 따로 만들어준 CustomException이라는 객체와 ErrorMap이라는 객체에 "email"이라는 키와 "사용 중인 email입니다."라는 value를 넣어준다.
- 이 에러 메세지를 만들어줌으로써 프론트에서 이 메세지를 처리할 수 있게 된다.

---

</br></br>

**Repository**

```java

@Mapper
public interface UserRepository {
	public User findUserByEmail(String email);
}

```

</br>

- xml file로 대체
- interface를 써야 Mapper를 쓸 수 있고, mybatis에서 받을 수 있다.
- Service에서 보낸 email을 데이터베이스로 들고가서 확인을 한다.

---

</br></br>

**Sql**

```sql

<select id="findUserByEmail" resultMap="userMap">
  select
    ut.user_id,
    ut.email,
    ut.password,
    ut.name,
    ut.birth_day,
    ut.gender,
    ut.provider,
    ut.phone_number,
    
    at.authority_id,
    at.user_id,
    at.role_id,
    
    rt.role_id,
    rt.role_name
  from
    user_tb ut
    left outer join authority_tb at on(at.user_id = ut.user_id)
    left outer join role_tb rt on(rt.role_id = at.role_id)
  where
    ut.email = #{email}
</select>

```

</br>

- id는 Repository에 있는 findUserByEmail이고, 그 반환 값은 User 객체다.
- where문에는 user 테이블에 있는 email과 findUserByEmail에 매개변수 email을 받아서 비교해준다.
- 이 where문에서 이메일 비교를 했을 때, email이 존재하다면 위 Service에서 에러 메세지를 띄우게 되는 것.

---

</br></br>

**데이터베이스**

![이메일 확인 데이터](https://github.com/iuejeong/-AWS-_Java_study_202212_euihyun/assets/121987405/a2e41380-3059-4807-a2b4-3c60148afe85)

</br>

- 영상에서 보여졌던 dmlgus3585@gmail.com이라는 이메일이 이미 존재하다는 것을 사진을 통해 확인할 수 있다.

---
  
</div>
</details>

<details>
<summary>그 외 유효성 검사 및 회원가입 성공</summary>
<div markdown="1">

</br>

**영상**

</br>

![그 외 유효성 검사 및 회원가입 성공](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/2dac8417-6567-427f-855a-fe6c728a2fd1)

</br></br>

## FrontEnd

**회원가입 정보 입력**

```html

<div css={signupInputContainerWrap}>
    <FormControl variant="standard">
	    <Input id="input-with-icon-adornment"
		css={inputMargin}
		label="password"
		variant="outlined"
		placeholder="8-16자의 영문 및 숫자, 특수문자를 모두 포함"
		name="password"
		type="password"
		onChange={onChangeHandler} 
		startAdornment={
		    <InputAdornment position="start">
		    <Lock />
		    </InputAdornment>
		} />
	    {errorMessage.password && <Alert css={errorCss} severity="error">{errorMessage.password}</Alert>}
    </FormControl>
</div>

<div css={signupInputContainerWrap}>
    <FormControl variant="standard">
	    <Input id="input-with-icon-adornment" 
		label="password" 
		variant="outlined" 
		placeholder="비밀번호 재입력" 
		name="confirmPassword" 
		type="password" 
		onChange={onChangeHandler} 
		startAdornment={
		    <InputAdornment position="start">
		    <Lock />
		    </InputAdornment>
		} />
	     {errorMessage.confirmPassword && <Alert css={errorCss} severity="error">{errorMessage.confirmPassword}</Alert>}
    </FormControl>
</div>

```

</br>

- 비밀번호 입력하는 부분만 예시로 넣었다. 나머지는 형식이 똑같음.


---

</br></br>
  
</div>
</details>

<br/>

### **로그인 화면 구현 영상 및 코드 리뷰**

<details>
<summary>로그인 유효성 검사 및 예외 처리</summary>
<div markdown="1">

![로그인 유효성 검사 및 예외처리](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/f095cb2f-d0a7-4127-9279-44e37efbe79a)
  
</div>
</details>

<br />

### **펀딩 메인 페이지 화면 구현 영상 및 코드 리뷰**

<details>
<summary>1. 카테고리 적용</summary>
<div markdown="1">
  
![카테고리 - Clipchamp로 제작 (1)](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/402755b6-cfc9-4570-8a93-0c4274a2d2e8)

  
</div>
</details>

<details>
<summary>2. 정렬(전체, 진행중, 종료)</summary>
<div markdown="1">

![정렬(전체, 진행중, 종료)](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/8b3de60f-18f2-4500-bc2b-12b6f255214b)
  
</div>
</details>

<details>
<summary>3. 정렬(최신 순, 참여 금액 순, 참여율 순, 종료 임박 순)</summary>
<div markdown="1">
<br/>

- 최신 순
  
![최신 순 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/6ee7a5ac-fa0e-491a-ab49-4d046c3c7a93)

<br/><br/>

- 참여금액 순
  
![참여 금액 순 - Clipchamp로 제작 (1)](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/2c598491-a31d-4f0b-887e-b296e686cd10)

<br/><br/>

- 참여율 순

![참여율 순 - Clipchamp로 제작 (1)](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/8034d691-c756-449c-b0fe-bd40a648a002)

<br/><br/>

- 종료 임박 순

![종료 임박 순 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/edbb6514-334a-4ae8-a8a5-dff336992268)
  
</div>
</details>

<br/>

### **펀딩 상세 페이지 화면 구현 영상 및 코드 리뷰**

<details>
<summary>현재 진행 중인 펀딩</summary>
<div markdown="1">

![상세페이지 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/03dbfdd9-aa06-49b6-ae18-cbc3eb8a917a)

</div>
</details>

<details>
<summary>펀딩 참여하기(결제)</summary>
<div markdown="1">

![결제 처음 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/efa13972-cf36-46ce-8d24-88ef1951057a)

<br/><br/>

![KakaoTalk_20230624_165355960_01](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/3fab79c9-46f7-4985-8761-4cdb7d354bed)

<br/><br/>

![KakaoTalk_20230624_165355960_02](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/bf156ff1-3fbe-4c58-aba3-f42d68983b0c)

<br/><br/>

![KakaoTalk_20230624_165355960_03](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/d8413386-8d92-42d4-a32c-69af3ceb6727)

<br/><br/>

</div>
</details>

<details>
<summary>종료된 펀딩</summary>
<div markdown="1">

![종료된 펀딩](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/238f395c-98bc-4262-99c6-e3ce59013b34)

</div>
</details>

<br/>

### **관리자 펀딩 및 기부 등록 페이지 화면 구현 영상 및 코드 리뷰**

<details>
<summary>기부 및 펀딩 등록 유효성 검사</summary>
<div markdown="1">

![관리자 페이지 유효성 검사 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/d5d256ce-e970-40a9-9496-9aa57a43197f)

</div>
</details>

<details>
<summary>기부 등록</summary>
<div markdown="1">

![기부 등록 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/311a9a48-11e9-44a9-8691-0def0355ba07)

</div>
</details>

<details>
<summary>펀딩 등록</summary>
<div markdown="1">

![펀딩 등록 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/69890336-542c-42f2-b6fd-43ee0dbd6f89)

</div>
</details>

<br/>

### **관리자 펀딩 및 기부 수정 화면 구현 영상 및 코드 리뷰**

<details>
<summary>기부 수정</summary>
<div markdown="1">

![기부 수정 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/65ce4d46-6748-4936-bcba-4bd0ca3d5a26)

</div>
</details>

<details>
<summary>펀딩 수정</summary>
<div markdown="1">
  
![펀딩 수정 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/5c1ae2c5-038e-49be-8fbc-611f014ca421)

</div>
</details>

<br/>

### **관리자 펀딩 및 기부 삭제 화면 구현 영상 및 코드 리뷰**

<details>
<summary>기부 삭제</summary>
<div markdown="1">
  
![기부 삭제 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/91f9ff1a-73c5-4350-9682-3bfb66b8552d)

</div>
</details>

<details>
<summary>펀딩 삭제</summary>
<div markdown="1">
  
![펀딩 삭제 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/b0d12753-abce-45a6-9fa3-caca513d43f4)

</div>
</details>

<br/>

### **OAuth2 회원가입 및 로그인 화면 구현 영상 및 코드 리뷰**

<details>
<summary>OAuth2 회원가입 및 로그인</summary>
<div markdown="1">
  
![OAuth2 회원가입 및 로그인 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/c2bebc58-65d9-4b68-adba-dc939e1d0883)

</div>
</details>

<br/>

### **OAuth2 Google, Kakao 계정 통합 화면 구현 영상 및 코드 리뷰**

<details>
<summary>OAuth2 계정 통합</summary>
<div markdown="1">
  
![OAuth2 계정 통합 - Clipchamp로 제작](https://github.com/KORIT-KLJK/CrowdFunding-portfolio/assets/121987405/478e6782-37a1-4e0b-b352-fcbd70c0b817)


</div>
</details>

<br/>
